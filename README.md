# DIRS-PYJS1

### Idea

Python script browses some file hierarcy (i. e. HDD or SSD) and gather information about stored files;
the information is coded as JS array of data records.

```index.html``` opens and trigger JS engine to process data records, so that the page contains all the
stored directories/files structure.

### Project files

```index.html``` - contains just page starter and the list of all registered ```file hierarchies```.
We can include the file hierarchy in the output page only when it is registered here.

```styles.css``` - styles for the output

```./js/dirs-engine.js``` - all the processing functions written in JS

```./js/<file-hierarchy-name>.js``` - the description of file hierarchy, the name ```<file-hierarchy-name>```
must be registered in ```index.html```.

The files ```<file-hierarchy-name>.js``` are generated by Python script ```dirs.py```.

### File Hierarchy files Structure
```
window[<file-hierarchy-name>] = [
    ["root", <epoch>, <size>, <file-name>],
    ["root", <epoch>, <negative-id>, <dir-name>],
     ....
    ["<dir-name>#<negative-id>", <epoch>, <size>, <file-name-in-dir>],
    ["<dir-name>#<negative-id>", <epoch>, <negative-id>, <subdir-name-in-dir>]
     ...
];
```

For example:

```
window["TST-DIRS-1"] = [
    ["root", 1765150639, 123, "file1-name"],
    ["root", 1765150639, -1,   "dir1-name"],
    ["dir1-name#-1", 1765150639, 99987, "file1-in-dir1-name"],
    ["dir1-name#-1", 1765150639, 0, "file2-in-dir1-name"],
    ["dir1-name#-1", 1765144444, -1,   "subdir"],
    ["subdir#-1", 1765150639, 66666, "file3-in-subdir"]
];
```

The mechanic with ```"<dir-name>#<negative-id>"``` allows to resolve conflicts, when the directory name 
repeats in some other part of file hierarchy.


### Usage

Actually the size of hierarchies is huge, considering that storage discs contain archives with thousands of raw photo jpegs, etc.
It means that the rendering of HTML when index.html is called, takes several seconds.
This is acceptable, and navigation through the hierarchy by links is working.
Whats bad, is the bug in Chromium browser engine: when the size of page is huge, the search (Ctrl-F)
fails to position the page to the searched string.

How to reproduce it: open huge index.html with some unique string near the end of page, go to the start of page,
Ctrl-F and type that unique string. Search box says that 1/1 match found, but the page is positioned in wrong place.

This bug is reproduced on AVG Secure Browser and Edge, built on the same Chromium open source project.
When retried on FireFox, the search works fine, so there is no such bug in FireFox.

### Details

Latest version of ```dirs.py``` script sorts the content of every directory. Sorting rules:
- subdirectories go first, then files
- subdirectories are alphabetically sorted, case in-sensitive
- files are also alphabetically sorted, case in-sensitive.
